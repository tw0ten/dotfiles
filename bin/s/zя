#!/bin/sh
i="$(niri msg -j keyboard-layouts | jq -r '.names[]' |
	dmenu -p 'keyboard ' --minimal-lines --index)"

niri msg action switch-layout "$i"

case "$(niri msg keyboard-layouts | grep '\*')" in
	*' Chinese') fcitx5-remote -s 'pinyin' ;;
	*) fcitx5-remote -s 'keyboard-us' ;;
esac
